<!-- base.html -->
<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#2d1b3d">
    <link rel="icon" href="/static/favicon.ico">  
    <!-- إضافة ملفات CSS مشتركة هنا -->
    <link rel="stylesheet" href="{{ url_for('static', path='css/style.css') }}">
   
    <title>{% block title %}العائلة{% endblock %}</title>
</head>
<body>
    <!-- Epic Neural Background -->
    <div class="neural-background"></div>
    
     <!-- Header -->
    <header class="glass">
        <nav >
            <div>
                <a href="/" class="logo">الحـوطية</a>
            </div>

            <div class="nav-center">
                <ul class="nav-links">
                    <li><a href="/">الرئيسية</a></li>
                    <li><a href="/news">الأخبار</a></li>
                    <li><a href="/articles">المقالات</a></li>
                    <li><a href="/names">شجرة العائلة</a></li>
                    <li><a href="#">عننا</a></li>
                    {% if user and user.role == "admin" %}
                    <li><a href="/admin">الإدارة</a></li>
                    {% endif %}
                </ul>
            </div>

            <!-- الـ User Area في أقصى اليمين 100% -->
            <div class="user-area">
                {% if user %}
                    <button class="modern-user-btn" id="modernUserBtn">
                        <div class="avatar-circle">
                            {{ user.username[0] | upper }}
                        </div>
                        <svg class="chevron" viewBox="0 0 24 24" width="16" height="16">
                            <path fill="currentColor" d="M7 10l5 5 5-5z"/>
                        </svg>
                    </button>

                    <div class="modern-dropdown" id="modernDropdown">
                        <div class="dropdown-header-mini">
                            <div class="avatar-circle big">{{ user.username[0] | upper }}</div>
                            <div>
                                <div class="name">{{ user.username }}</div>
                                <div class="role">
                                    {% if user.role == 'admin' %}مدير النظام
                                    {% elif user.role == 'manager' %}مدير
                                    {% else %}عضو{% endif %}
                                </div>
                            </div>
                        </div>
                        <a href="/profile" class="dropdown-link">
                            صفحتي الشخصية
                        </a>
                        <a href="/auth/logout" class="dropdown-link logout">
                            تسجيل الخروج
                        </a>
                    </div>
                {% else %}
                    <a href="/auth/login" class="btn-login">تسجيل الدخول</a>
                {% endif %}
            </div>

            <div class="mobile-menu-toggle">
                <div class="hamburger-line"></div>
                <div class="hamburger-line"></div>
                <div class="hamburger-line"></div>
            </div>
        </nav>
        <div class="mobile-nav">
            <a href="/">الرئيسية</a>
            <a href="/news">الأخبار</a>
            <a href="/articles">المقالات</a>
            <a href="/names">شجرة العائلة</a>
            {% if user and user.role == "admin" %}
            <a href="/admin">الإدارة</a>
            {% endif %}
            {% if user %}
            <a href="/profile">صفحتي الشخصية</a>
             <a href="/auth/logout" style="color:#ff6b6b;">تسجيل الخروج</a>
            {% else %}
            <a href="/auth/login">تسجيل الدخول</a>
            {% endif %}
        </div>
    </header>  

    <main>
        {% block content %}{% endblock %}
    </main>
     <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="footer-links">
                <a href="#">Privacy Policy</a>
                <a href="#">Terms of Service</a>
                <a href="#">Documentation</a>
                <!-- Add external links -->
    			      <a href="https://github.com/" target="_blank" rel="noopener">GitHub</a>
            </div>
            <div class="footer-copyright">
                <p>&copy; 2025 Glass Interface.. جميع الحقوق محفوظة.</p>
            </div>
            <div class="footer-design">
                <a href="#">Quantum Framework</a>
            </div>
        </div>
    </footer>      
   
    <!-- إضافة ملفات JavaScript مشتركة هنا -->
    <script src="{{ url_for('static', path='js/main.js') }}"></script>
    <!-- الحل السحري الأخير - يشتغل مهما حصل -->
<script>
document.addEventListener("DOMContentLoaded", function () {
    const btn = document.getElementById("modernUserBtn");
    const menu = document.getElementById("modernDropdown");

    if (btn && menu) {
        btn.addEventListener("click", e => {
            e.stopPropagation();
            menu.classList.toggle("show");
        });

        document.addEventListener("click", () => menu.classList.remove("show"));
        menu.addEventListener("click", e => e.stopPropagation());
    }
});
</script>
</body>
</html>