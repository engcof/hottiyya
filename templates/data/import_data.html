{% extends "base.html" %}
{% block title %}استيراد البيانات{% endblock %}
{% block content %}
<section class="family-section">
    <div class="container">
        <h2 class="text-gradient">استيراد بيانات العائلة</h2>
        
        {% if message %}
        <div class="alert {{ 'success' if 'نجاح' in message else 'error' }}">
            {{ message | safe }}
        </div>
        {% endif %}

        <form method="post" enctype="multipart/form-data" action="/data/import-data">
            <div class="form-group">
                <label>ملف النسخة الاحتياطية (.dump أو .sql)</label>
                <input type="file" name="dump_file" accept=".dump,.sql" required />
            </div>
            <div class="form-group">
                <label>كلمة سر الأدمن</label>
                <input type="password" name="password" required />
            </div>
            <button type="submit" class="submit-btn">استيراد البيانات الآن</button>
        </form>

       
         <!-- تصحيح نموذج التصدير ليستخدم POST و المسار الصحيح -->
        <div class="export-box">
            <h3>تصدير الداتا الحالية من الموقع</h3>
            <p>احفظ نسخة حديثة من قاعدة البيانات على جهازك في أي وقت.</p>
            
            <!-- تم تغيير method إلى POST و action إلى المسار الصحيح /data/export-data -->
            <form method="post" action="/data/export-data" class="export-form">
                <div class="form-group">
                <!-- هذا الإدخال هو كلمة المرور التي ترسل إلى دالة @router.post("/export-data") -->
                <input type="password" name="password" placeholder="كلمة مرور الأدمن" required>
                </div>
                <button type="submit" class="submit-btn">تحميل الداتا الحالية (.dump)</button>
            </form>
            <small style="display: block; margin-top: 10px; color: #004d40;">تتم عملية التصدير في الخلفية وقد تستغرق بعض الوقت.</small>
        </div>

         <div style="margin-top: 20px;">
            <a href="/" class="submit-btn secondary">العودة للقائمة</a>
        </div>
    </div>
</section>
{% endblock %}