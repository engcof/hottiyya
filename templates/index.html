{% extends "base.html" %}
{% block title %}عائلة الحوطية{% endblock %}

{% block content %}
<div class="news-ticker-bar">
    <div class="ticker-inner">
        <span class="ticker-badge">جديد</span>
        <span class="ticker-content">آخر مقال: {{ latest_article_title }} - <a href="/articles/latest">اقرأ الآن</a></span>
        <span class="ticker-separator">•</span>
        <span class="ticker-content">أخبار العائلة: تم تحديث شجرة الأنساب بإضافة 54 عضوًا جديدًا.</span>
        <span class="ticker-separator">•</span>
        
        <span class="ticker-badge">جديد</span>
        <span class="ticker-content">آخر مقال: {{ latest_article_title }} -<a href="/articles/latest">اقرأ الآن</a></span>
        <span class="ticker-separator">•</span>
        <span class="ticker-content">أخبار العائلة: تم تحديث شجرة الأنساب بإضافة 54 عضوًا جديدًا.</span>
        <span class="ticker-separator">•</span>

        <span class="ticker-badge">جديد</span>
        <span class="ticker-content">آخر مقال: {{ latest_article_title }} -<a href="/articles/latest">اقرأ الآن</a></span>
        <span class="ticker-separator">•</span>
        <span class="ticker-content">أخبار العائلة: تم تحديث شجرة الأنساب بإضافة 54 عضوًا جديدًا.</span>
        <span class="ticker-separator">•</span>

    </div>
</div>
<main>
    <section class="hero-section">
        <div class="hero-content">
            
            <h3 class="basmala">بِسْمِ اللهِ الرَّحْمَنِ الرَّحِيمِ</h3>
            
            <h1 class="hero-title">الحوطية</h1>
            
            <p class="hero-description">
                قبيلة الحوطية، تتميز بأصالة النسب، كرم الأخلاق، والتكافل الاجتماعي. سجلت تاريخها في خدمة المجتمع والدين منذ قرون.
            </p>
            
            <a href="/about" class="cta-button">اقرأ المزيد عن العائلة</a>
        </div>
        
        </section>
    
        <div class="stats-bar-integrated">
            <div class="stats-inner">
                <div class="stat">
                    <span class="num" style="color:#10b981">{{ today_visitors }}</span>
                    <span class="label">اليوم</span>
                </div>
                <div class="separator">•</div>
                <div class="stat">
                    <span class="num" style="color:#3b82f6">{{ total_visitors }}</span>
                    <span class="label">الإجمالي</span>
                </div>
                <div class="separator">•</div>
                
                <div class="stat online-stat" style="position:relative;">
                    <div class="online-wrapper">
                        <span class="num" style="color:#f59e0b">{{ online_count }}</span>
                        <span class="label">أونلاين</span>
                        
                        {% if online_count > 0 %}
                        <button class="online-toggle" id="onlineToggle" title="عرض المستخدمين أونلاين">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                                <polyline points="15 6 9 12 15 18"></polyline>
                            </svg>
                        </button>
                        {% endif %}
                    </div>
                   
                </div>
            </div>
        </div>
    
        <section class="latest-update">
            <div class="container">
                <div class="update-card glass latest-announcement-card"> 
                    <span class="badge">أحدث إعلان</span>
                    <h3>تم إطلاق منصة عائلة الحوطية الرقمية رسميًا!</h3>
                    <p>
                        بفضل الله ثم بجهود الأسرة الكريمة، أصبح لعائلتنا الآن منصة رقمية متكاملة تجمع الأجيال وتحفظ التراث إلى الأبد.
                    </p>
                    <small>21 نوفمبر 2025</small>
                </div>
            </div>
        </section>
        <section class="latest-articles-grid">
        <div class="container">
            <h2 class="section-heading">أحدث المقالات المضافة</h2>
            
            <div class="articles-grid">
                {% for article in articles_for_homepage %}
                <div class="article-homepage-card glass">
                    <div class="card-meta">
                        <span class="card-date">{{ article.created_at.strftime('%d %B') }}</span>
                        <span class="card-author">{{ article.username }}</span>
                    </div>
                    <h3 class="card-title">{{ article.title }}</h3>
                    <p class="card-excerpt">
                        {{ article.excerpt | truncate(80) }}
                    </p>
                    <a href="{{ article.url }}" class="card-read-more">
                        اقرأ المقال الكامل
                        <svg viewBox="0 0 24 24" width="16" height="16"><path fill="currentColor" d="M4 11h12.17l-5.59-5.59L12 4l8 8-8 8-1.41-1.41L16.17 13H4z"/></svg>
                    </a>
                </div>
                {% endfor %}
                
                <div class="view-all-card">
                    <a href="/articles" class="btn-all-articles">
                        جميع المقالات
                        <svg viewBox="0 0 24 24" width="24" height="24"><path fill="currentColor" d="M12 4.5l-1.41 1.41L14.17 11H4v2h10.17l-3.58 3.59L12 19.5l8-8z"/></svg>
                    </a>
                </div>
            </div>
            
        </div>
    </section>
    
</main>


<div id="onlinePortal"></div>

<script>
document.getElementById('onlinePortal').innerHTML = `
  <div class="online-list" id="onlineList" style="display:none; position:fixed; z-index:99999; background:var(--glass-strong); backdrop-filter:blur(20px); border:1px solid var(--border); border-radius:16px; padding:12px; min-width:200px; box-shadow:0 15px 40px rgba(0,0,0,0.22);">
    ${document.querySelectorAll('.online-item').length ? [...document.querySelectorAll('.online-item')].map(item => item.outerHTML).join('') : '<div style="padding:8px 12px; color:var(--text-light);">لا يوجد مستخدمون أونلاين</div>'}
  </div>
`;
document.getElementById('onlinePortal').appendChild(document.getElementById('onlineList'));
</script>
{% endblock %}