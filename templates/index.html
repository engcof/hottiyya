{% extends "base.html" %}
{% block title %}الحوطية{% endblock %}

{% block content %}
<div class="news-ticker-bar">
    <div class="ticker-inner">
        <span class="ticker-badge">جديد</span>
        <span class="ticker-content">آخر مقال: {{ latest_article_title }} - <a href="/articles/latest">اقرأ الآن</a></span>
        <span class="ticker-separator">•</span>
        <span class="ticker-content">ألاخبار: تم تحديث شجرة الأنساب بإضافة 54 عضوًا جديدًا.</span>
        <span class="ticker-separator">•</span>
        
        <span class="ticker-badge">جديد</span>
        <span class="ticker-content">آخر مقال: {{ latest_article_title }} -<a href="/articles/latest">اقرأ الآن</a></span>
        <span class="ticker-separator">•</span>
        <span class="ticker-content">ألاخبار: تم تحديث شجرة الأنساب بإضافة 54 عضوًا جديدًا.</span>
        <span class="ticker-separator">•</span>

        <span class="ticker-badge">جديد</span>
        <span class="ticker-content">آخر مقال: {{ latest_article_title }} -<a href="/articles/latest">اقرأ الآن</a></span>
        <span class="ticker-separator">•</span>
        <span class="ticker-content">ألاخبار: تم تحديث شجرة الأنساب بإضافة 54 عضوًا جديدًا.</span>
        <span class="ticker-separator">•</span>

    </div>
</div>
<main>
    <section class="hero-section">
        <div class="hero-content">
            <h3 class="basmala">بِسْمِ اللهِ الرَّحْمَنِ الرَّحِيمِ</h3>
            <h1 class="hero-title">الحوطية</h1>
            <p class="hero-description">
               
            </p>
            <a href="/about" class="cta-button">اقرأ المزيد </a>
        </div>
    </section>
    <section class="stats-section stats-grid">
        <div class="stat-card note-style today-stat">
            <span class="num" style="color:#10b981">{{ today_visitors }}</span>
            <span class="label">اليوم</span>
        </div>

        <div class="stat-card note-style total-stat">
            <span class="num" style="color:#3b82f6">{{ total_visitors }}</span>
            <span class="label">الإجمالي</span>
        </div>

        <div class="stat-card note-style online-stat">
            <div class="online-top-line"> 
                <span class="num" style="color:#f59e0b">{{ online_count }}</span>
                {% if online_count > 0 %}
                    <button class="online-toggle" id="onlineToggle" title="عرض المستخدمين أونلاين" aria-expanded="false" aria-controls="onlineList">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                            <polyline points="15 6 9 12 15 18"></polyline>
                        </svg>
                    </button>
                {% endif %}
            </div>  
            <span class="label">أونلاين</span>
            <div id="onlineList" class="online-list">
                {% if online_users %}
                    {% for user in online_users %}
                        <div class="online-user-item">
                            <span class="status-dot"></span> 
                            <span>{{ user.username }}</span>
                        </div>
                    {% endfor %}
                {% else %}
                    <div style="padding: 0 16px; color: var(--text-light);">لا يوجد مستخدمون حاليًا</div>
                {% endif %}
            </div>
        </div>
    </section>
    
    <section class="latest-update">
        <div class="container">
                <div class="update-card glass latest-announcement-card"> 
                    <span class="badge">أحدث إعلان</span>
                    <h3>تم إطلاق منصة الحوطية الرقمية رسميًا!</h3>
                    <p>
                       
                    </p>
                    <small>21 نوفمبر 2025</small>
                </div>
            </div>
    </section>
    <section class="latest-articles-grid">
        <div class="container">
            <h2 class="section-heading">أحدث المقالات المضافة</h2>
            
            <div class="articles-grid">
                {% for article in articles_for_homepage %}
                <div class="article-homepage-card glass">
                    <div class="card-meta">
                        <span class="card-date">{{ article.created_at.strftime('%d %B') }}</span>
                        <span class="card-author">{{ article.username }}</span>
                    </div>
                    <h3 class="card-title">{{ article.title }}</h3>
                    <p class="card-excerpt">
                        {{ article.excerpt | truncate(80) }}
                    </p>
                    <a href="{{ article.url }}" class="card-read-more">
                        اقرأ المقال الكامل
                        <svg viewBox="0 0 24 24" width="16" height="16"><path fill="currentColor" d="M4 11h12.17l-5.59-5.59L12 4l8 8-8 8-1.41-1.41L16.17 13H4z"/></svg>
                    </a>
                </div>
                {% endfor %}
                
                <div class="view-all-card">
                    <a href="/articles" class="btn-all-articles">
                        جميع المقالات
                        <svg viewBox="0 0 24 24" width="24" height="24"><path fill="currentColor" d="M12 4.5l-1.41 1.41L14.17 11H4v2h10.17l-3.58 3.59L12 19.5l8-8z"/></svg>
                    </a>
                </div>
            </div>
            
        </div>
    </section>
   
</main>
<div id="onlineDropdownPortal">
</div>
{% endblock %}