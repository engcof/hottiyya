{% extends "base.html" %}
{% block title %}الأخبار - عائلة الحوطية{% endblock %}

{% block content %}
<section class="news-page">
    <div class="container">
        <!-- العنوان الملكي -->
        <div class="page-header">
            <h1 class="page-title">الأخبار</h1>
            <p class="page-subtitle">آخر المستجدات والأحداث </p>
        </div>

        <!-- زر إضافة خبر (للإدمن والمدير فقط) -->
        {% if can_add %}
        <div class="add-news-wrapper">
            <a href="/news/add" class="btn-add-news">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="12" y1="5" x2="12" y2="19"></line>
                    <line x1="5" y1="12" x2="19" y2="12"></line>
                </svg>
                إضافة خبر جديد
            </a>
        </div>
        {% endif %}

        <!-- رسالة إذا ما فيش أخبار -->
        {% if not news %}
        <div class="empty-state">
            <div class="empty-icon">Newspaper</div>
            <h3>لا توجد أخبار بعد</h3>
            <p>سيتم نشر الأخبار المهمة هنا فور توفرها</p>
        </div>
        {% else %}

        <!-- شبكة الأخبار الفاخرة -->
        <div class="news-grid">
            {% for item in news %}
            <article class="news-card">
                <!-- الصورة -->
                {% if item.image_url %}
                <div class="news-thumb">
                    <img src="{{ item.image_url }}" alt="{{ item.title }}" loading="lazy">
                    <div class="news-overlay"></div>
                </div>
                {% endif %}

                <!-- المحتوى -->
                <div class="news-content">
                    <div class="news-meta">
                        <span class="author">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                <circle cx="12" cy="7" r="4"></circle>
                            </svg>
                            {{ item.author }}
                        </span>
                        <span class="date">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                                <line x1="16" y1="2" x2="16" y2="6"></line>
                                <line x1="8" y1="2" x2="8" y2="6"></line>
                                <line x1="3" y1="10" x2="21" y2="10"></line>
                            </svg>
                            {{ item.created_at.strftime('%d %B %Y') }}
                        </span>
                    </div>

                    <h3 class="news-title">{{ item.title }}</h3>
                    <p class="news-excerpt">
                        {{ item.content|striptags|truncate(180) }}
                    </p>

                    <a href="/news/{{ item.id }}" class="read-more">
                        اقرأ المزيد
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path d="M7 17L17 7"></path>
                            <path d="M7 7h10v10"></path>
                        </svg>
                    </a>
                </div>
            </article>
            {% endfor %}
        </div>
        {% endif %}
    </div>
</section>
{% endblock %}